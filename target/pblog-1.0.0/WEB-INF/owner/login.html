<html>
<head>
    <meta charset="UTF-8">
    <title>登录</title>
    <link type="images/x-icon" rel="shortcut icon" href="/pb/imgs/blog_icon.png">
    <link rel="stylesheet" type="text/css" href="/pb/css/loadingDiv.css">
    <!--   VUE-->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <!--  jQuery-->
    <script src="/pb/js/jquery-3.4.1.min.js"></script>
    <script src="/pb/js/constants.js"></script>
    <script src="/pb/js/showOrHiddenLoadingDiv.js"></script>

<!--
<link type="images/x-icon" rel="shortcut icon" href="/pblog/imgs/blog_icon.png">
    <link rel="stylesheet" type="text/css" href="/pblog/css/loadingDiv.css">
    <script src="/pblog/js/jquery-3.4.1.min.js"></script>
    <script src="/pblog/js/constants.js"></script>
    <script src="/pblog/js/showOrHiddenLoadingDiv.js"></script>
-->
    <style>
        .login_div {
            position: relative;
            width: 40%;
            height: 50%;
            background-color: #99D9EA;
            margin-left: 50%;
            top: 25%;
            transform: translateX(-50%);
            border-radius: 10px;
            opacity: 0.7;
        }

        .username_img {
            position: relative;
            top: 35%;
            left: 25%;
        }

        .password_img {
            position: relative;
            top: 45%;
            left: 25%;
        }

        .input_class {
            border: none;
            background: none;
            border-bottom: 3px dotted olivedrab;
            font-size: 15px;
        }

        #userName_input {
            width: 40%;
            position: relative;
            left: 35%;
            top: 30%;
        }

        #password_input {
            width: 40%;
            position: relative;
            top: 40%;
            left: 35%;
        }

        .login_span {
            background: darkseagreen;
            border-radius: 10px;
            position: relative;
            top: 50%;
            left: 50%;
            transform: translateX(-50%);
        }

        .login_span:hover {
            background: red;
            transition-property: all;
            transition-duration: 0.75s;
            transition-timing-function: ease;
            transition-delay: 0s;

        }

        .login_span:active {
            background: slateblue;
            transition-property: all;
            transition-duration: 0.75s;
            transition-timing-function: ease;
            transition-delay: 0s;
        }
    </style>
</head>

<body style="background: #C6587B">
<div class="loading_div" id="loading_div">
    <div></div>
    <img src="/pb/imgs/loading.gif"/></div>
<div class="login_div">
    <img class="username_img" src="/pb/imgs/username_icon.png"/>
    <input class="input_class" id="userName_input" type="text"/><br>
    <img class="password_img" src="/pb/imgs/password_icon.png"/>
    <input class="input_class" id="password_input" type="password"/><br>
    <span class="login_span" id="login_span" style="padding: 0.5% 1.5% 0.5% 1.5%;border-radius: 5px;">登录</span>
</div>
</body>
<script>

    var loadAjax = "";
    var userName = "";
    var password = "";
    /**
     * 登录按钮点击事件
     */
    var verifyLoginInfo = function () {
        userName = $("#userName_input").val().trim();
        password = $("#password_input").val().trim();
        if (!userName || !password) {
            alert("请您填入有效数据!!!");
            $("#userName_input").val("");
            $("#password_input").val("");
        } else {
            loginRequest();
        }
    };
    $("#login_span").on("click", function () {
        verifyLoginInfo();
    });

    var loginRequest = function () {
        showOrHiddenLoadingDiv(true);
        if (loadAjax)
            loadAjax.abort();
        loadAjax = $.ajax({
            method: 'POST',
            url: '/pb/ownerInfo/login',
            data: {
                userName: userName,
                password: password
            },
            dataType: 'text',
            success: function (data) {
                showOrHiddenLoadingDiv(false);
                if (data === SUCCESS) {
                    window.location.href = '/pb/owner/ownerMain.html';
                } else {
                    if (confirm("验证失败，重新链接？？？"))
                        loginRequest();
                }
            }
        }).fail(function () {
            showOrHiddenLoadingDiv(false);
            if (confirm("网络链接失败，重新链接？？？"))
                loginRequest();
        });
    };

    document.addEventListener('keyup', function (e) {
        if (e.key === 'Enter') {
            verifyLoginInfo();
        }
    });
</script>
</html>